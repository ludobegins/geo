{"version":3,"file":"asymmetrik-ngx-leaflet-draw.mjs","sources":["../../../projects/ngx-leaflet-draw/src/lib/core/leaflet-draw.util.ts","../../../projects/ngx-leaflet-draw/src/lib/core/leaflet-draw.directive.ts","../../../projects/ngx-leaflet-draw/src/lib/leaflet-draw.module.ts","../../../projects/ngx-leaflet-draw/src/asymmetrik-ngx-leaflet-draw.ts"],"sourcesContent":["export class LeafletDrawUtil {\n\n\t/**\n\t * Deep copy the source object into the dest object. Will only copy literal values.\n\t * @param dest\n\t * @param src\n\t */\n\tstatic deepLiteralCopy<T>(dest: T, src: any): T {\n\t\tconst toReturn: T = dest;\n\n\t\tif (null != src) {\n\t\t\tfor (const k in src) {\n\n\t\t\t\tif (src.hasOwnProperty(k)) {\n\t\t\t\t\tif (typeof (src[k]) === 'string' || src[k] instanceof String) {\n\t\t\t\t\t\ttoReturn[k] = src[k];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.deepLiteralCopy(toReturn[k], src[k])\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\treturn toReturn;\n\t}\n\n\n}\n","import { Directive, EventEmitter, Input, NgZone, OnInit, Output } from '@angular/core';\n\nimport { Control, Draw, DrawEvents, drawLocal } from 'leaflet';\nimport 'leaflet-draw';\n\nimport { LeafletDirective, LeafletDirectiveWrapper, LeafletUtil } from '@asymmetrik/ngx-leaflet';\n\nimport { LeafletDrawUtil } from './leaflet-draw.util';\n\n@Directive({\n\tselector: '[leafletDraw]'\n})\nexport class LeafletDrawDirective\n\timplements OnInit {\n\n\tleafletDirective: LeafletDirectiveWrapper;\n\n\tdrawControl: Control.Draw;\n\n\t@Input('leafletDrawOptions') drawOptions: Control.DrawConstructorOptions = null;\n\n\t// Using 'any' here to avoid duplicating the DrawLocal interface with a bunch of optional properties\n\t@Input('leafletDrawLocal') drawLocal: any = null;\n\n\t// Configure callback function for the map\n\t@Output('leafletDrawReady') drawReady = new EventEmitter<Control.Draw>();\n\n\t// Draw Events\n\t@Output('leafletDrawCreated') onDrawCreated = new EventEmitter<DrawEvents.Created>();\n\t@Output('leafletDrawEdited') onDrawEdited = new EventEmitter<DrawEvents.Edited>();\n\t@Output('leafletDrawDeleted') onDrawDeleted = new EventEmitter<DrawEvents.Deleted>();\n\t@Output('leafletDrawStart') onDrawStart = new EventEmitter<DrawEvents.DrawStart>();\n\t@Output('leafletDrawStop') onDrawStop = new EventEmitter<DrawEvents.DrawStop>();\n\t@Output('leafletDrawVertex') onDrawVertex = new EventEmitter<DrawEvents.DrawVertex>();\n\t@Output('leafletDrawEditStart') onDrawEditStart = new EventEmitter<DrawEvents.EditStart>();\n\t@Output('leafletDrawEditMove') onDrawEditMove = new EventEmitter<DrawEvents.EditMove>();\n\t@Output('leafletDrawEditResize') onDrawEditResize = new EventEmitter<DrawEvents.EditResize>();\n\t@Output('leafletDrawEditVertex') onDrawEditVertex = new EventEmitter<DrawEvents.EditVertex>();\n\t@Output('leafletDrawEditStop') onDrawEditStop = new EventEmitter<DrawEvents.EditStop>();\n\t@Output('leafletDrawDeleteStart') onDrawDeleteStart = new EventEmitter<DrawEvents.DeleteStart>();\n\t@Output('leafletDrawDeleteStop') onDrawDeleteStop = new EventEmitter<DrawEvents.DeleteStop>();\n\t@Output('leafletDrawToolbarOpened') onDrawToolbarOpened = new EventEmitter<DrawEvents.ToolbarOpened>();\n\t@Output('leafletDrawToolbarClosed') onDrawToolbarClosed = new EventEmitter<DrawEvents.ToolbarClosed>();\n\t@Output('leafletDrawMarkerContext') onDrawMarkerContext = new EventEmitter<DrawEvents.MarkerContext>();\n\n\tconstructor(leafletDirective: LeafletDirective, private zone: NgZone) {\n\t\tthis.leafletDirective = new LeafletDirectiveWrapper(leafletDirective);\n\t}\n\n\tngOnInit() {\n\t\tthis.leafletDirective.init();\n\n\t\t// Configure localization options\n\t\tif(null != this.drawLocal) {\n\t\t\tLeafletDrawUtil.deepLiteralCopy(drawLocal, this.drawLocal);\n\t\t}\n\n\t\t// Create the control\n\t\tthis.drawControl =  new Control.Draw(this.drawOptions);\n\n\t\t// Add the control to the map\n\t\tthis.leafletDirective.getMap().addControl(this.drawControl);\n\n\t\t// Register the main handler for events coming from the draw plugin\n\t\tconst map = this.leafletDirective.getMap();\n\n\t\t// add draw event pass throughs\n\t\tmap.on(Draw.Event.CREATED, (e: any) => LeafletUtil.handleEvent(this.zone, this.onDrawCreated, e));\n\t\tmap.on(Draw.Event.EDITED, (e: DrawEvents.Edited) => LeafletUtil.handleEvent(this.zone, this.onDrawEdited, e));\n\t\tmap.on(Draw.Event.DELETED, (e: DrawEvents.Deleted) => LeafletUtil.handleEvent(this.zone, this.onDrawDeleted, e));\n\t\tmap.on(Draw.Event.DRAWSTART, (e: DrawEvents.DrawStart) => LeafletUtil.handleEvent(this.zone, this.onDrawStart, e));\n\t\tmap.on(Draw.Event.DRAWSTOP, (e: DrawEvents.DrawStop) => LeafletUtil.handleEvent(this.zone, this.onDrawStop, e));\n\t\tmap.on(Draw.Event.EDITSTART, (e: DrawEvents.EditStart) => LeafletUtil.handleEvent(this.zone, this.onDrawEditStart, e));\n\t\tmap.on(Draw.Event.EDITMOVE, (e: DrawEvents.EditMove) => LeafletUtil.handleEvent(this.zone, this.onDrawEditMove, e));\n\t\tmap.on(Draw.Event.EDITRESIZE, (e: DrawEvents.EditResize) => LeafletUtil.handleEvent(this.zone, this.onDrawEditResize, e));\n\t\tmap.on(Draw.Event.EDITVERTEX, (e: DrawEvents.EditVertex) => LeafletUtil.handleEvent(this.zone, this.onDrawEditVertex, e));\n\t\tmap.on(Draw.Event.EDITSTOP, (e: DrawEvents.EditStop) => LeafletUtil.handleEvent(this.zone, this.onDrawEditStop, e));\n\t\tmap.on(Draw.Event.DELETESTART, (e: DrawEvents.DeleteStart) => LeafletUtil.handleEvent(this.zone, this.onDrawDeleteStart, e));\n\t\tmap.on(Draw.Event.DELETESTOP, (e: DrawEvents.DeleteStop) => LeafletUtil.handleEvent(this.zone, this.onDrawDeleteStop, e));\n\t\tmap.on(Draw.Event.TOOLBAROPENED, (e: DrawEvents.ToolbarOpened) => LeafletUtil.handleEvent(this.zone, this.onDrawToolbarOpened, e));\n\t\tmap.on(Draw.Event.TOOLBARCLOSED, (e: DrawEvents.ToolbarClosed) => LeafletUtil.handleEvent(this.zone, this.onDrawToolbarClosed, e));\n\n\t\t// Notify others that the draw control has been created\n\t\tthis.drawReady.emit(this.drawControl);\n\t}\n\n\tngOnDestroy() {\n\t\tthis.leafletDirective.getMap().removeControl(this.drawControl);\n\t}\n\n\tpublic getDrawControl() {\n\t\treturn this.drawControl;\n\t}\n\n}\n","import { NgModule } from '@angular/core';\n\nimport { LeafletModule } from '@asymmetrik/ngx-leaflet';\n\nimport { LeafletDrawDirective } from './core/leaflet-draw.directive';\n\n@NgModule({\n\timports: [\n\t\tLeafletModule\n\t],\n\texports: [\n\t\tLeafletDrawDirective\n\t],\n\tdeclarations: [\n\t\tLeafletDrawDirective\n\t]\n})\nexport class LeafletDrawModule {\n\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}